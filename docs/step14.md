## Redis 를 이용한 대기열 시스템

### Redis 선정 이유
1. 인메모리 저장소로 읽기와 쓰기 속도가 빠르다.
2. 다양한 자료구조 지원한다.
3. DB의 부하를 줄여준다.

### Redis 자료구조
1. Writing queue 
> ZSet(Sorted Set) 자료구조를 사용하여 대기열을 구현했습니다.

2. Action queue
> ZSet에서 대기중인 토큰을 활성화 할때 Set 자료구조를 사용하여 활성화된 토큰을 관리합니다.

3. 토큰 메타 정보
> 각 토큰에 대한 메타 정보를 관리하는데 hash 자료구로를 사용했습니다.  
> Action queue 진입시 ttl 설정합니다.

### 구현 방식
1. 대기열 생성시 대기열 토큰을 추가하고 토큰의 메타 정보를 해시에 저장합니다.
2. 대기열 활성시 대기열에서 토큰을 제거하고 Action Queue에 추가되고 해시정보의 TTL이 동작합니다.
3. 해시 정보의 TTL이 만료되거나 예약 완료하는 경우 Action Queue에서 토큰 제거와 함께 토큰 정보(hash) 함께 제거됩니다.
